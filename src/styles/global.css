@import "tailwindcss";
@custom-variant dark (&:where(.dark, .dark *));
/* Distinct characters:
	O0 8B 1Iil 5S 2Z 6b 9g QG EF pqijr
	“” ‘’
*/

/* Global settings like color palette, spacing, typography, breakpoints, etc. */
@theme {
	--font-sans:
		"Inter", "ui-sans-serif", "system-ui", "-apple-system", "BlinkMacSystemFont", "Segoe UI", "Roboto", "Helvetica Neue", "Arial", "Noto Sans",
		"sans-serif";
	--font-serif: "Merriweather", "Harding", "ui-serif", "Cambria", "Georgia", "Times New Roman", "Times", "serif";
	--font-mono: "Courier New", "ui-monospace", "SFMono-Regular", "Menlo", "Monaco", "Liberation Mono", "Consolas", "monospace";
	--font-tlit: "Noto Serif", Cambria, serif;

	--fontsize: 18px;
	--content-max-width: 960px;
	--content-size: 60rem;
	--content-padding-inline: clamp(1.125rem, 2.2vw + 0.52rem, 2.5rem);
	--shadow-3xl: 0 25px 25px rgba(0, 0, 0, 0.75);

	--text-h1: clamp(2.44rem, 2.38vi + 1.85rem, 3.75rem);
	--text-h2: clamp(1.95rem, 1.56vi + 1.56rem, 2.81rem);
	--text-h3: clamp(1.56rem, 1vi + 1.31rem, 2.11rem);
	--text-h4: clamp(1.25rem, 0.61vi + 1.1rem, 1.58rem);
	--text-h5: clamp(1rem, 0.34vi + 0.91rem, 1.19rem);
	--text-h6: clamp(0.8rem, 0.17vi + 0.76rem, 0.89rem);

	--aspect-book: 2 / 3;
}

:root {
	font-feature-settings:
		"liga" 1,
		"calt" 1,
		"ss01" 1,
		"ss03" 1,
		"cv01" 1,
		"cv05" 1,
		"cv08" 1;
	--bg-lit: --alpha(var(--color-stone-50) / 15%);
	/* 	--bg-light: var(--color-stone-50);--bg: var(--color-stone-200);--bg-dark: var(--color-stone-300);--tx: var(--color-stone-800);--dim: var(--color-stone-600); */
	--bright: var(--color-stone-950);
	--link: var(--color-red-700);
	--link-hover: var(--color-red-900);
	--link-visited: var(--color-pink-900);
	--link-underline: var(--color-red-600);
	--primary: var(--color-orange-900);
	--secondary: var(--color-rose-800);
	--highlight: var(--color-orange-950);
	--border: var(--color-stone-300);
	--border-muted: var(--color-stone-200);
	--transliteration: var(--color-blue-900);
	--greek: var(--color-fuchsia-900);
	--armenian: var(--color-yellow-800);
	--popover: var(--color-red-700);
	--summ: var(--color-yellow-200);
	--head: var(--color-blue-200);
	--sect: var(--color-emerald-300);
	--logo: brightness(0) saturate(100%) invert(21%) sepia(93%) saturate(1923%) hue-rotate(28deg) brightness(91%) contrast(101%);
	--glow: #565757;
	--bg-dark: oklch(0.92 0 88);
	--bg: oklch(0.96 0 88);
	--bg-light: oklch(1 0 88);
	--tx: oklch(0.15 0 88);
	--dim: oklch(0.4 0 88);
	/* --highlight: oklch(1 0 88); */
	--border: oklch(0.6 0 88);
	--border-muted: oklch(0.9 0 88);
}
.dark {
	--bg-lit: --alpha(var(--color-neutral-700) / 15%);
	/* 	--bg-light: var(--color-neutral-800);--bg: var(--color-neutral-900);--bg-dark: var(--color-neutral-950);--tx: var(--color-neutral-200);--dim: var(--color-neutral-400); */
	--bright: var(--color-neutral-50);
	--link: var(--color-amber-400);
	--link-hover: var(--color-amber-200);
	--link-visited: var(--color-amber-100);
	--link-underline: var(--color-orange-600);
	--primary: var(--color-orange-200);
	--secondary: var(--color-yellow-200);
	--highlight: var(--color-yellow-400);
	--border: var(--color-neutral-700);
	--border-muted: var(--color-neutral-800);
	--transliteration: var(--color-orange-300);
	--greek: var(--color-emerald-200);
	--armenian: var(--color-yellow-400);
	--popover: var(--color-emerald-500);
	--summ: var(--color-yellow-800);
	--head: var(--color-blue-900);
	--sect: var(--color-emerald-900);
	--logo: brightness(0) saturate(100%) invert(82%) sepia(33%) saturate(4114%) hue-rotate(328deg) brightness(102%) contrast(102%);
	--glow: #c8c845;

	--bg-dark: oklch(0.15 0 88);
	--bg: oklch(0.2 0 88);
	--bg-light: oklch(0.25 0 88);
	--tx: oklch(0.86 0 88);
	--dim: oklch(0.66 0 88);
	/* --highlight: oklch(0.5 0 88); */
	--border: oklch(0.4 0 88);
	--border-muted: oklch(0.32 0 88);
}
/* Add your own default base styles for specific HTML elements */
@layer base {
	::selection {
		color: #701a75;
		background-color: hsl(291, 93%, 83%);
	}

	/* 	:root {
		interpolate-size: allow-keywords;
		font-feature-settings: "ss01" 1, "ss02" 1, "ss03" 1;
	} */

	html {
		font-size: var(--fontsize);
		line-height: 1.625;
		transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
		transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
		transition-duration: 0.5s;
		scroll-padding-top: calc(var(--header-height) + 1rem); /* anchor top fix */
		background-color: var(--bg);
		color: var(--tx);
		scroll-padding-top: 120px; /* accounts for sticky header */
		scroll-behavior: smooth;
	}

	a {
		text-decoration: none;
		color: var(--link);
	}
	a:visited {
		color: var(--link-visited);
	}
	a:hover {
		color: var(--link-hover);
		text-decoration: underline;
		text-underline-offset: 1px;
		text-decoration-color: var(--link-underline);
	}
	/* 	a[href$=".pdf"]::after {
		content: url(/svg/pdf.svg);
		vertical-align: middle;
		font-size: 1em;
	}
 */
	p {
		display: block;
		margin-top: 1em;
		margin-bottom: 1em;
		margin-left: 0;
		margin-right: 0;
	}

	article {
		width: 100%;
	}

	header {
		--header-height: calc(var(--spacing) * 16);
		height: var(--header-height); /* scroll-padding-top in html above (anchor scroll fix) */
	}

	input {
		background-color: initial;
	}
	table {
		font-size: var(--text-base);
		border-collapse: collapse;
		width: 100%;
		margin-block: calc(var(--spacing) * 5);
		th {
			text-align: left;
			border-bottom: 2px solid var(--border);
			margin-bottom: 1rem;
		}
		td {
			font-size: var(--text-sm);
			padding-inline: 0.5rem;
			padding-block: 0.25rem;
			/* vertical-align: top; */
			border-bottom: 1px solid var(--border);
		}

		caption-side: bottom;
		caption {
			font-style: italic;
			font-size: var(--text-xs);
			padding-top: calc(var(--spacing) * 2);
			color: var(--dim);
		}
	}

	h1 {
		font-size: var(--text-h1);
		line-height: var(--text-5xl--line-height);
		span {
			font-weight: 200;
			font-size: 75%;
			font-style: italic;
		}
	}

	h2 {
		font-size: var(--text-h2);
		/* font-size: clamp(1.5rem, 1.318rem + 0.91vw, 2rem); */
		line-height: var(--text-3xl--line-height);
		color: var(--bright);
	}

	h3 {
		font-size: var(--text-h3);
		line-height: var(--text-2xl--line-height);
		color: var(--bright);
	}
	h1,
	h2,
	h3 {
		padding-left: 0.25em;
		font-family: var(--font-serif);
	}
	h1,
	h2 {
		font-weight: bold;
		margin-top: 1em;
	}
	h4 {
		font-size: var(--text-h4);
		line-height: var(--text-sm--line-height);
		margin-block: 2em;
		font-weight: var(--font-weight-semibold);
	}

	abbr {
		cursor: help;
		font-style: italic;
		text-decoration-style: dotted;
		color: var(--dim) !important;
	}
	blockquote {
		quotes: "“" "”" "‘" "’";
		color: var(--dim);
		background-color: var(--bg-light);
		border-left: 14px solid var(--highlight);
		font-size: 90%;
		font-style: italic;
		font-weight: 400;
		line-height: var(--leading-snug);
		max-width: 60ch;
		margin-inline: auto;
		margin-block: calc(var(--spacing) * 8);
		padding: calc(var(--spacing) * 5) calc(var(--spacing) * 4);
		border-radius: 0 calc(var(--spacing) * 3) calc(var(--spacing) * 3) 0;
		box-shadow: var(--shadow-lg);
		overflow: clip;
	}
	sup {
		top: 0;
	}
	/* blockquote .text-right {
		color: var(--default-color-2);
	} */
	.ordinal {
		font-variant-numeric: ordinal;
		vertical-align: super;
	}
}

@layer components {
	.pagewidth {
		--content-size: 960px;
		--content-padding-inline: 2rem;
		max-width: var(--content-size);
		padding-inline: var(--content-padding-inline);
		margin-inline: auto;
	}

	.card {
		background: var(--bg-light);
		border-radius: var(--radius-2xl);
		padding: calc(var(--spacing) * 4) /* 1rem = 16px */;
		--shadow: 0px 2px 2px hsla(0, 0%, 0%, 0.07), 0px 4px 4px hsla(0, 0%, 0%, 0.15);
		box-shadow: var(--shadow);
		border: 1px solid var(--border-muted);
		a:hover {
			text-decoration: none;
		}
	}

	/* Turin stuff */
	tlit,
	.tlit {
		color: var(--transliteration);
		font-family: var(--font-tlit);
		font-style: italic;
		letter-spacing: 0.08em;
		text-shadow:
			0 0 10px --alpha(var(--transliteration) / 0.25),
			0 0 20px --alpha(var(--transliteration) / 0.25);
	}

	.lead {
		margin-inline: calc(var(--spacing) * 8);
		padding-block: calc(var(--spacing) * 4);
	}

	.tbl {
		box-shadow: inset 0px 5px 10px 0px rgba(0, 0, 0, 0.5);
		border-radius: 1.5rem;
		width: fit-content;
		min-width: var(--container-lg);
		margin-inline: auto;
		margin-block: calc(var(--spacing) * 10);
		padding: calc(var(--spacing) * 4);
		background-color: var(--bg-dark);
		table {
			margin-block: 0;
		}
	}

	.bg {
		background-color: var(--bg);
	}
	.bg-light {
		background-color: var(--bg-light);
	}
	.bg-dark {
		background-color: var(--bg-dark);
	}
	.bg-primary {
		background-color: var(--primary);
	}
	.bg-secondary {
		background-color: var(--secondary);
	}
	.bg-highlight {
		background-color: var(--highlight);
	}
	.bg-lit {
		background-color: var(--bg-lit);
	}

	.tx {
		color: var(--tx);
	}

	.summ {
		background-color: var(--summ);
	}
	.head {
		background-color: var(--head);
	}
	.sect {
		background-color: var(--sect);
	}

	.dim,
	.bibliography {
		color: var(--dim);
	}
	#biblio {
		color: var(--dim);
		font-size: var(--text-sm);
		margin-block: calc(var(--spacing) * 4);
		li {
			line-height: var(--leading-normal);
			margin-bottom: 0 !important;
		}
		b {
			color: var(--tx);
			font-variant: small-caps;
			font-weight: normal;
		}
	}

	figcaption {
		text-align: center;
		color: var(--dim);
		&:hover {
			color: var(--tx);
		}
		.figtitle {
			font-weight: var(--font-weight-medium);
			font-size: var(--text-lg);
		}
		.figauthor {
			font-size: var(--text-sm);
			font-weight: var(--font-weight-normal);
		}
	}
	.primary {
		color: var(--primary);
	}
	.secondary {
		color: var(--secondary);
	}
	.highlight {
		color: var(--highlight);
	}
	.bordercolor {
		border-color: var(--border);
	}
	d {
		/* dim */
		color: --alpha(var(--tx) / 0.5);
	}
	m {
		/* missing */
		color: --alpha(var(--tx) / 0.75);
	}

	:lang(grc),
	gr,
	.gr {
		font-family: var(--sans) !important;
		color: var(--greek);
		text-shadow:
			0 0 10px --alpha(var(--greek) / 0.25),
			0 0 15px --alpha(var(--greek) / 0.15);
	}

	:lang(xcl),
	ar,
	.ar {
		font-family: var(--sans);
		color: var(--armenian);
	}

	#toppen {
		display: none;
		position: fixed;
		bottom: 2rem;
		right: 2rem;
		z-index: 99;
		cursor: pointer;
		color: light-dark(var(--color-white), var(--color-black));
		background: light-dark(var(--color-black), var(--color-white));
		border-radius: 10px;
		padding-inline: 1ch;
		font-size: var(--text-sm);
		box-shadow: 2px 2px 8px #00000082;
	}
	/* /dynasty/*.md */
	.dynruta {
		font-family: var(--font-sans);
		position: relative;
		margin-block: calc(var(--spacing) * 10);
		margin-block: calc(var(--spacing) * 10);
		padding: calc(var(--spacing) * 4);
		border-radius: var(--radius-xl);
		background-color: var(--bg-light);
		border: 1px solid var(--bordercolor);
		box-shadow: 0 15px 15px -5px light-dark(var(--color-stone-500), var(--color-neutral-950));
		a {
			font-size: var(--text-sm);
		}
	}
	.dynasty {
		font-size: var(--text-xs);
		grid-template-columns: repeat(3, minmax(0, 1fr));
		gap: 2.5rem;
		display: grid;
		h3 {
			font-size: var(--text-sm);
			color: var(--dim);
			line-height: var(--leading-snug);
			padding-block: calc(var(--spacing) * 2);
		}
		.farao {
			padding-block: 1.25rem;
			font-size: 0.875rem;
			line-height: 1.25rem;
			list-style-type: decimal;
			list-style-position: inside;
			li {
				padding-block: 0.25rem;
				border-bottom: 1px solid var(--border);
			}
			.total {
				list-style-type: none !important;
				font-weight: var(--font-weight-semibold);
			}
		}
	}
	.dynasty .farao .y,
	.dynasty .y {
		text-align: right;
		width: 100%;
		display: inline-block;
	}
	.according {
		--tw-border-opacity: 1;
		color: var(--primary);
		border-bottom-width: 1px;
		border-color: var(--border);
		text-align: center;
		font-size: var(--text-xs);
		line-height: 1.25rem;
	}
	.synk {
		margin: calc(var(--spacing) * 3);
		background: var(--bg-lit);
		padding: calc(var(--spacing) * 2);
		border-radius: calc(var(--spacing) * 2);
		font-size: var(--text-xs);
		color: var(--default-color-2);
		border: 1px solid var(--border-dim);
		box-shadow: var(--shadow-md);
		border-top: 1px solid var(--bg-light);
	}
	[popovertarget] {
		cursor: pointer;
		font-family: var(--font-sans);
		vertical-align: super;
		color: var(--popover);
		border-radius: 0.25rem;
		/* margin-inline: 0.25ch;
		padding-inline: 0.25ch; */
		font-size: 90%;
		font-style: normal;
		font-weight: 700;
		line-height: 1rem;
		font-feature-settings: "zero" 0;
		/* background-color: var(--bg-light); */
	}
	[popover]:popover-open {
		opacity: 1;
		box-shadow: var(--shadow-3xl);
		text-align: left;
	}

	/* Not yet ready for anchor() or @position-try (2025-11-11) */
	[popover] {
		position: fixed;
		width: fit-content;
		max-width: clamp(20rem, 12.727rem + 36.36vw, 40rem);
		height: fit-content;
		padding: calc(var(--spacing) * 2) calc(var(--spacing) * 3) calc(var(--spacing) * 4) calc(var(--spacing) * 3);
		background: var(--bg-light);
		color: var(--tx);
		border: solid 4px var(--border);
		border-radius: 10px;
		margin: auto;
		font-size: 90%;
		inset: 0;
		overflow: auto;
		transform-origin: top center;
	}
	[popover] p {
		margin-block: 0 calc(var(--spacing) * 2);
		color: var(--popover);
		font-weight: var(--font-weight-black);
		font-size: var(--text-xl) !important;
	}
	[popover]::backdrop {
		background: #00000080;
		pointer-events: none;
	}
	[popovertarget]:hover,
	[popovertarget]:focus {
		color: var(--tx);
		/* background-color: var(--bg-dark); */
		cursor: pointer;
	}

	/* Footnote styles */
	/* 	span.footnote {
		cursor: pointer;
		user-select: none;
		position: relative;
	}

	span.footnote sup.footnote-number {
		font-size: 0.85em;
		line-height: 0;
		vertical-align: baseline;
		position: relative;
		top: -0.1em;
		color: var(--link);
		font-weight: 600;
		text-decoration: none;
		margin-left: 0.1em;
	}

	span.footnote:hover sup.footnote-number,
	span.footnote:focus sup.footnote-number {
		color: var(--link-hover);
		text-decoration: underline;
	}
 */
	/* 	.footsote-popover {
		max-width: min(90vw, 400px);
		padding: 1rem;
		background: var(--bg-light);
		border: solid 4px var(--border);
		border-radius: 10px;
		box-shadow:
			0 4px 6px -1px rgba(0, 0, 0, 0.1),
			0 2px 4px -1px rgba(0, 0, 0, 0.06);
		font-size: 0.875rem;
		line-height: 1.5;
		color: var(--tx);
		z-index: 1000;
	}

	.dark .footnote-popover {
		background: var(--bg-dark);
		border-color: var(--dark-border);
		box-shadow:
			0 4px 6px -1px rgba(0, 0, 0, 0.3),
			0 2px 4px -1px rgba(0, 0, 0, 0.2);
	}

	.footnote-popover::backdrop {
		background: rgba(0, 0, 0, 0.1);
	}
 */

	.references-list .reference-item {
		break-inside: avoid;
		page-break-inside: avoid;
	}

	mid {
		font-size: var(--text-xs);
		font-style: normal;
		color: var(--primary);
		vertical-align: 5%;
		padding-inline: 0.5ch;
	}

	.r,
	r {
		/* Red ink  */
		color: var(--color-red-500);
	}
	.m,
	m {
		/* Missing ink  */
		color: var(--dim);
		font-weight: var(--font-weight-light);
	}
	img.logo {
		width: 200px;
		height: auto;
		transition: width 0.3s ease;
		filter: var(--logo);
	}

	header.scrolled img.logo {
		width: 240px;
	}

	:lang(cop) {
		color: var(--highlight);
		text-shadow: 0 0 4px var(--glow);
	}
	.dark :lang(cop) {
		text-shadow: 0 0 6px var(--glow);
	}
	.g2 {
		--g2: linear-gradient(180deg, #170b05 0%, #59311d 50%, #9a6a52 100%);
		--g2: linear-gradient(180deg, #14222b 0%, #141e27 50%, #0a0b10 100%);
		background-image: var(--g2);
	}
	.dot {
		position: absolute;
		background-color: var(--border);
		width: calc(var(--spacing) * 5);
		height: calc(var(--spacing) * 5);
		border-radius: calc(infinity * 1px);
		margin-top: calc(var(--spacing) * 1);
		left: calc(var(--spacing) * -2.5) /* -0.625rem = -10px */;
	}
	.footnote {
		color: goldenrod;
		padding-inline: 0.25ch;
	}
	.footnot-number {
		color: var(--primary);
		font-size: 24px !important;
	}
	.footnote::after {
		content: "]";
		font-weight: 400;
		font-size: 80%;
	}
	.footnote::before {
		content: "[";
		font-weight: 400;
		font-size: 80%;
	}

	/* articles/manetho1,2,3 */
	.pagenum {
		position: absolute;
		top: auto;
		right: +1.5em;
		width: 70px;
		text-align: right;
		font-style: normal;
		font-weight: normal;
		text-transform: none;
		font-variant: normal;
		letter-spacing: normal;
		font-size: small;
		color: var(--primary);
		hyphens: none;
	}
	.ref {
		vertical-align: super;
		font-size: x-small;
		line-height: normal;
	}
}
@media print {
	*,
	*::before,
	*::after {
		box-shadow: none !important;
		text-shadow: none !important;
	}
}
